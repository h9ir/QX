###############################################
#          WeChat AD-Block (Safe Mode, fixed)
#   过滤公众号图文、列表/主页广告 + 朋友圈广告（不影响 QQ 服务）
###############################################

# ======== 公众号图文广告 ======== #
# 文章内广告请求（正文内广告）
^https?:\/\/mp\.weixin\.qq\.com\/mp\/getappmsgad url reject-200
# 文章底部推荐广告
^https?:\/\/mp\.weixin\.qq\.com\/mp\/relatedarticle.*ad url reject-200
# 广告上报接口 / 广告组件
^https?:\/\/mp\.weixin\.qq\.com\/mp\/ad_complain url reject-200
^https?:\/\/mp\.weixin\.qq\.com\/mp\/admsg url reject-200
^https?:\/\/mp\.weixin\.qq\.com\/mp\/advertisement_report url reject-200
^https?:\/\/mp\.weixin\.qq\.com\/mp\/video\?action=report url reject-200
# 正文 JSON 过滤（安全版，不误伤正文，但会移除广告字段）
^https?:\/\/mp\.weixin\.qq\.com\/mp\/getappmsgext url script-response-body https://raw.githubusercontent.com/h9ir/QX/refs/heads/main/WeChat.js
# ======== 公众号主页 / 列表（新增，去除主页/历史/列表广告） ======== #
# 公众号主页/历史文章列表，很多广告/推荐通过 profile_ext 返回 JSON，使用脚本清理
^https?:\/\/mp\.weixin\.qq\.com\/mp\/profile_ext.* url script-response-body https://raw.githubusercontent.com/h9ir/QX/refs/heads/main/WeChat.js
# 兼容旧/变体接口（确保覆盖）
^https?:\/\/mp\.weixin\.qq\.com\/mp\/getprofile.* url script-response-body https://raw.githubusercontent.com/h9ir/QX/refs/heads/main/WeChat.js
# ======== 小程序/朋友圈/推广卡片 ======== #
# 朋友圈广告上报 & 推广卡片（保守匹配）
^https?:\/\/mp\.weixin\.qq\.com\/mp\/ad_complain url reject-200
^https?:\/\/mp\.weixin\.qq\.com\/mp\/advertisement_report url reject-200
^https?:\/\/mp\.weixin\.qq\.com\/mp\/admsg url reject-200
^https?:\/\/mp\.weixin\.qq\.com\/s\/ad url reject-200
# 可选：视频号推荐/推广（保守，不强制）
# ^https?:\/\/vweixinfk\.qq\.com\/.*(ad|advert) url reject-200
###############################################
# ⚠❌ 保证不影响 QQ 邮箱 / QQ 登录 / 小程序 / 视频号
#    hostname 仅限微信相关域名，避免误杀其他 qq.com 服务
###############################################

hostname = mp.weixin.qq.com
